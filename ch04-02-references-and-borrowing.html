<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>References and Borrowing - The Rust Programming Language</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">
        <link rel="stylesheet" href="js-extensions/packages/consent-form/dist/index.css">
        <link rel="stylesheet" href="js-extensions/packages/feedback/dist/index.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="experiment-intro.html">Experiment Introduction</a></li><li class="chapter-item expanded affix "><a href="title-page.html">The Rust Programming Language</a></li><li class="chapter-item expanded affix "><a href="foreword.html">Foreword</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="ch01-02-hello-world.html"><strong aria-hidden="true">1.2.</strong> Hello, World!</a></li><li class="chapter-item expanded "><a href="ch01-03-hello-cargo.html"><strong aria-hidden="true">1.3.</strong> Hello, Cargo!</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-guessing-game-tutorial.html"><strong aria-hidden="true">2.</strong> Programming a Guessing Game</a></li><li class="chapter-item expanded "><a href="ch03-00-common-programming-concepts.html"><strong aria-hidden="true">3.</strong> Common Programming Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-variables-and-mutability.html"><strong aria-hidden="true">3.1.</strong> Variables and Mutability</a></li><li class="chapter-item expanded "><a href="ch03-02-data-types.html"><strong aria-hidden="true">3.2.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="ch03-03-how-functions-work.html"><strong aria-hidden="true">3.3.</strong> Functions</a></li><li class="chapter-item expanded "><a href="ch03-04-comments.html"><strong aria-hidden="true">3.4.</strong> Comments</a></li><li class="chapter-item expanded "><a href="ch03-05-control-flow.html"><strong aria-hidden="true">3.5.</strong> Control Flow</a></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-understanding-ownership.html"><strong aria-hidden="true">4.</strong> Understanding Ownership</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-what-is-ownership.html"><strong aria-hidden="true">4.1.</strong> What is Ownership?</a></li><li class="chapter-item expanded "><a href="ch04-02-references-and-borrowing.html" class="active"><strong aria-hidden="true">4.2.</strong> References and Borrowing</a></li><li class="chapter-item expanded "><a href="ch04-03-fixing-ownership-errors.html"><strong aria-hidden="true">4.3.</strong> Fixing Ownership Errors</a></li><li class="chapter-item expanded "><a href="ch04-04-slices.html"><strong aria-hidden="true">4.4.</strong> The Slice Type</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-structs.html"><strong aria-hidden="true">5.</strong> Using Structs to Structure Related Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-defining-structs.html"><strong aria-hidden="true">5.1.</strong> Defining and Instantiating Structs</a></li><li class="chapter-item expanded "><a href="ch05-02-example-structs.html"><strong aria-hidden="true">5.2.</strong> An Example Program Using Structs</a></li><li class="chapter-item expanded "><a href="ch05-03-method-syntax.html"><strong aria-hidden="true">5.3.</strong> Method Syntax</a></li></ol></li><li class="chapter-item expanded "><a href="ch06-00-enums.html"><strong aria-hidden="true">6.</strong> Enums and Pattern Matching</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch06-01-defining-an-enum.html"><strong aria-hidden="true">6.1.</strong> Defining an Enum</a></li><li class="chapter-item expanded "><a href="ch06-02-match.html"><strong aria-hidden="true">6.2.</strong> The match Control Flow Construct</a></li><li class="chapter-item expanded "><a href="ch06-03-if-let.html"><strong aria-hidden="true">6.3.</strong> Concise Control Flow with if let</a></li><li class="chapter-item expanded "><a href="ch06-04-inventory.html"><strong aria-hidden="true">6.4.</strong> Ownership Inventory #1</a></li></ol></li><li class="chapter-item expanded "><a href="ch07-00-managing-growing-projects-with-packages-crates-and-modules.html"><strong aria-hidden="true">7.</strong> Managing Growing Projects with Packages, Crates, and Modules</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch07-01-packages-and-crates.html"><strong aria-hidden="true">7.1.</strong> Packages and Crates</a></li><li class="chapter-item expanded "><a href="ch07-02-defining-modules-to-control-scope-and-privacy.html"><strong aria-hidden="true">7.2.</strong> Defining Modules to Control Scope and Privacy</a></li><li class="chapter-item expanded "><a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html"><strong aria-hidden="true">7.3.</strong> Paths for Referring to an Item in the Module Tree</a></li><li class="chapter-item expanded "><a href="ch07-04-bringing-paths-into-scope-with-the-use-keyword.html"><strong aria-hidden="true">7.4.</strong> Bringing Paths Into Scope with the use Keyword</a></li><li class="chapter-item expanded "><a href="ch07-05-separating-modules-into-different-files.html"><strong aria-hidden="true">7.5.</strong> Separating Modules into Different Files</a></li></ol></li><li class="chapter-item expanded "><a href="ch08-00-common-collections.html"><strong aria-hidden="true">8.</strong> Common Collections</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch08-01-vectors.html"><strong aria-hidden="true">8.1.</strong> Storing Lists of Values with Vectors</a></li><li class="chapter-item expanded "><a href="ch08-02-strings.html"><strong aria-hidden="true">8.2.</strong> Storing UTF-8 Encoded Text with Strings</a></li><li class="chapter-item expanded "><a href="ch08-03-hash-maps.html"><strong aria-hidden="true">8.3.</strong> Storing Keys with Associated Values in Hash Maps</a></li><li class="chapter-item expanded "><a href="ch08-04-inventory.html"><strong aria-hidden="true">8.4.</strong> Ownership Inventory #2</a></li></ol></li><li class="chapter-item expanded "><a href="ch09-00-error-handling.html"><strong aria-hidden="true">9.</strong> Error Handling</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch09-01-unrecoverable-errors-with-panic.html"><strong aria-hidden="true">9.1.</strong> Unrecoverable Errors with panic!</a></li><li class="chapter-item expanded "><a href="ch09-02-recoverable-errors-with-result.html"><strong aria-hidden="true">9.2.</strong> Recoverable Errors with Result</a></li><li class="chapter-item expanded "><a href="ch09-03-to-panic-or-not-to-panic.html"><strong aria-hidden="true">9.3.</strong> To panic! or Not to panic!</a></li></ol></li><li class="chapter-item expanded "><a href="ch10-00-generics.html"><strong aria-hidden="true">10.</strong> Generic Types, Traits, and Lifetimes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch10-01-syntax.html"><strong aria-hidden="true">10.1.</strong> Generic Data Types</a></li><li class="chapter-item expanded "><a href="ch10-02-traits.html"><strong aria-hidden="true">10.2.</strong> Traits: Defining Shared Behavior</a></li><li class="chapter-item expanded "><a href="ch10-03-lifetime-syntax.html"><strong aria-hidden="true">10.3.</strong> Validating References with Lifetimes</a></li><li class="chapter-item expanded "><a href="ch10-04-inventory.html"><strong aria-hidden="true">10.4.</strong> Ownership Inventory #3</a></li></ol></li><li class="chapter-item expanded "><a href="ch11-00-testing.html"><strong aria-hidden="true">11.</strong> Writing Automated Tests</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch11-01-writing-tests.html"><strong aria-hidden="true">11.1.</strong> How to Write Tests</a></li><li class="chapter-item expanded "><a href="ch11-02-running-tests.html"><strong aria-hidden="true">11.2.</strong> Controlling How Tests Are Run</a></li><li class="chapter-item expanded "><a href="ch11-03-test-organization.html"><strong aria-hidden="true">11.3.</strong> Test Organization</a></li></ol></li><li class="chapter-item expanded "><a href="ch12-00-an-io-project.html"><strong aria-hidden="true">12.</strong> An I/O Project: Building a Command Line Program</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch12-01-accepting-command-line-arguments.html"><strong aria-hidden="true">12.1.</strong> Accepting Command Line Arguments</a></li><li class="chapter-item expanded "><a href="ch12-02-reading-a-file.html"><strong aria-hidden="true">12.2.</strong> Reading a File</a></li><li class="chapter-item expanded "><a href="ch12-03-improving-error-handling-and-modularity.html"><strong aria-hidden="true">12.3.</strong> Refactoring to Improve Modularity and Error Handling</a></li><li class="chapter-item expanded "><a href="ch12-04-testing-the-librarys-functionality.html"><strong aria-hidden="true">12.4.</strong> Developing the Library’s Functionality with Test Driven Development</a></li><li class="chapter-item expanded "><a href="ch12-05-working-with-environment-variables.html"><strong aria-hidden="true">12.5.</strong> Working with Environment Variables</a></li><li class="chapter-item expanded "><a href="ch12-06-writing-to-stderr-instead-of-stdout.html"><strong aria-hidden="true">12.6.</strong> Writing Error Messages to Standard Error Instead of Standard Output</a></li></ol></li><li class="chapter-item expanded "><a href="ch13-00-functional-features.html"><strong aria-hidden="true">13.</strong> Functional Language Features: Iterators and Closures</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch13-01-closures.html"><strong aria-hidden="true">13.1.</strong> Closures: Anonymous Functions that Capture Their Environment</a></li><li class="chapter-item expanded "><a href="ch13-02-iterators.html"><strong aria-hidden="true">13.2.</strong> Processing a Series of Items with Iterators</a></li><li class="chapter-item expanded "><a href="ch13-03-improving-our-io-project.html"><strong aria-hidden="true">13.3.</strong> Improving Our I/O Project</a></li><li class="chapter-item expanded "><a href="ch13-04-performance.html"><strong aria-hidden="true">13.4.</strong> Comparing Performance: Loops vs. Iterators</a></li></ol></li><li class="chapter-item expanded "><a href="ch14-00-more-about-cargo.html"><strong aria-hidden="true">14.</strong> More about Cargo and Crates.io</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch14-01-release-profiles.html"><strong aria-hidden="true">14.1.</strong> Customizing Builds with Release Profiles</a></li><li class="chapter-item expanded "><a href="ch14-02-publishing-to-crates-io.html"><strong aria-hidden="true">14.2.</strong> Publishing a Crate to Crates.io</a></li><li class="chapter-item expanded "><a href="ch14-03-cargo-workspaces.html"><strong aria-hidden="true">14.3.</strong> Cargo Workspaces</a></li><li class="chapter-item expanded "><a href="ch14-04-installing-binaries.html"><strong aria-hidden="true">14.4.</strong> Installing Binaries from Crates.io with cargo install</a></li><li class="chapter-item expanded "><a href="ch14-05-extending-cargo.html"><strong aria-hidden="true">14.5.</strong> Extending Cargo with Custom Commands</a></li></ol></li><li class="chapter-item expanded "><a href="ch15-00-smart-pointers.html"><strong aria-hidden="true">15.</strong> Smart Pointers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch15-01-box.html"><strong aria-hidden="true">15.1.</strong> Using Box&lt;T&gt; to Point to Data on the Heap</a></li><li class="chapter-item expanded "><a href="ch15-02-deref.html"><strong aria-hidden="true">15.2.</strong> Treating Smart Pointers Like Regular References with the Deref Trait</a></li><li class="chapter-item expanded "><a href="ch15-03-drop.html"><strong aria-hidden="true">15.3.</strong> Running Code on Cleanup with the Drop Trait</a></li><li class="chapter-item expanded "><a href="ch15-04-rc.html"><strong aria-hidden="true">15.4.</strong> Rc&lt;T&gt;, the Reference Counted Smart Pointer</a></li><li class="chapter-item expanded "><a href="ch15-05-interior-mutability.html"><strong aria-hidden="true">15.5.</strong> RefCell&lt;T&gt; and the Interior Mutability Pattern</a></li><li class="chapter-item expanded "><a href="ch15-06-reference-cycles.html"><strong aria-hidden="true">15.6.</strong> Reference Cycles Can Leak Memory</a></li></ol></li><li class="chapter-item expanded "><a href="ch16-00-concurrency.html"><strong aria-hidden="true">16.</strong> Fearless Concurrency</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch16-01-threads.html"><strong aria-hidden="true">16.1.</strong> Using Threads to Run Code Simultaneously</a></li><li class="chapter-item expanded "><a href="ch16-02-message-passing.html"><strong aria-hidden="true">16.2.</strong> Using Message Passing to Transfer Data Between Threads</a></li><li class="chapter-item expanded "><a href="ch16-03-shared-state.html"><strong aria-hidden="true">16.3.</strong> Shared-State Concurrency</a></li><li class="chapter-item expanded "><a href="ch16-04-extensible-concurrency-sync-and-send.html"><strong aria-hidden="true">16.4.</strong> Extensible Concurrency with the Sync and Send Traits</a></li></ol></li><li class="chapter-item expanded "><a href="ch17-00-oop.html"><strong aria-hidden="true">17.</strong> Object Oriented Programming Features of Rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch17-01-what-is-oo.html"><strong aria-hidden="true">17.1.</strong> Characteristics of Object-Oriented Languages</a></li><li class="chapter-item expanded "><a href="ch17-02-trait-objects.html"><strong aria-hidden="true">17.2.</strong> Using Trait Objects That Allow for Values of Different Types</a></li><li class="chapter-item expanded "><a href="ch17-03-oo-design-patterns.html"><strong aria-hidden="true">17.3.</strong> Implementing an Object-Oriented Design Pattern</a></li><li class="chapter-item expanded "><a href="ch17-04-inventory.html"><strong aria-hidden="true">17.4.</strong> Ownership Inventory #4</a></li></ol></li><li class="chapter-item expanded "><a href="ch18-00-patterns.html"><strong aria-hidden="true">18.</strong> Patterns and Matching</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch18-01-all-the-places-for-patterns.html"><strong aria-hidden="true">18.1.</strong> All the Places Patterns Can Be Used</a></li><li class="chapter-item expanded "><a href="ch18-02-refutability.html"><strong aria-hidden="true">18.2.</strong> Refutability: Whether a Pattern Might Fail to Match</a></li><li class="chapter-item expanded "><a href="ch18-03-pattern-syntax.html"><strong aria-hidden="true">18.3.</strong> Pattern Syntax</a></li></ol></li><li class="chapter-item expanded "><a href="ch19-00-advanced-features.html"><strong aria-hidden="true">19.</strong> Advanced Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch19-01-unsafe-rust.html"><strong aria-hidden="true">19.1.</strong> Unsafe Rust</a></li><li class="chapter-item expanded "><a href="ch19-03-advanced-traits.html"><strong aria-hidden="true">19.2.</strong> Advanced Traits</a></li><li class="chapter-item expanded "><a href="ch19-04-advanced-types.html"><strong aria-hidden="true">19.3.</strong> Advanced Types</a></li><li class="chapter-item expanded "><a href="ch19-05-advanced-functions-and-closures.html"><strong aria-hidden="true">19.4.</strong> Advanced Functions and Closures</a></li><li class="chapter-item expanded "><a href="ch19-06-macros.html"><strong aria-hidden="true">19.5.</strong> Macros</a></li></ol></li><li class="chapter-item expanded "><a href="ch20-00-final-project-a-web-server.html"><strong aria-hidden="true">20.</strong> Final Project: Building a Multithreaded Web Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch20-01-single-threaded.html"><strong aria-hidden="true">20.1.</strong> Building a Single-Threaded Web Server</a></li><li class="chapter-item expanded "><a href="ch20-02-multithreaded.html"><strong aria-hidden="true">20.2.</strong> Turning Our Single-Threaded Server into a Multithreaded Server</a></li><li class="chapter-item expanded "><a href="ch20-03-graceful-shutdown-and-cleanup.html"><strong aria-hidden="true">20.3.</strong> Graceful Shutdown and Cleanup</a></li></ol></li><li class="chapter-item expanded "><a href="end-of-experiment.html"><strong aria-hidden="true">21.</strong> End of Experiment</a></li><li class="chapter-item expanded "><a href="appendix-00.html"><strong aria-hidden="true">22.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix-01-keywords.html"><strong aria-hidden="true">22.1.</strong> A - Keywords</a></li><li class="chapter-item expanded "><a href="appendix-02-operators.html"><strong aria-hidden="true">22.2.</strong> B - Operators and Symbols</a></li><li class="chapter-item expanded "><a href="appendix-03-derivable-traits.html"><strong aria-hidden="true">22.3.</strong> C - Derivable Traits</a></li><li class="chapter-item expanded "><a href="appendix-04-useful-development-tools.html"><strong aria-hidden="true">22.4.</strong> D - Useful Development Tools</a></li><li class="chapter-item expanded "><a href="appendix-05-editions.html"><strong aria-hidden="true">22.5.</strong> E - Editions</a></li><li class="chapter-item expanded "><a href="appendix-06-translation.html"><strong aria-hidden="true">22.6.</strong> F - Translations of the Book</a></li><li class="chapter-item expanded "><a href="appendix-07-nightly-rust.html"><strong aria-hidden="true">22.7.</strong> G - How Rust is Made and “Nightly Rust”</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cognitive-engineering-lab/rust-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="references-and-borrowing"><a class="header" href="#references-and-borrowing">References and Borrowing</a></h2>
<p>Ownership, boxes, and moves provide a foundation for safely programming with the heap. However, move-only APIs can be inconvenient to use. For example, say you want to read some strings twice:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\n    let m1 = String::from(\&quot;Hello\&quot;);\n    let m2 = String::from(\&quot;world\&quot;);\n    greet(m1, m2);\n    let s = format!(\&quot;{} {}\&quot;, m1, m2); // Error: m1 and m2 are moved\n}\n\nfn greet(g1: String, g2: String) {\n    println!(\&quot;{} {}!\&quot;, g1, g2);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[102,140,240]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Error&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;PointerUseAfterFree&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:47,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:83,&quot;char_start&quot;:52,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:102,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:102,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:242,&quot;char_start&quot;:174,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;g1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:206,&quot;char_start&quot;:174,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:102,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:242,&quot;char_start&quot;:174,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;g1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:239,&quot;char_start&quot;:213,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:1}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:102,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:242,&quot;char_start&quot;:174,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;g1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:1}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:242,&quot;char_start&quot;:241,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:1}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:102,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:172,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:1}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:140,&quot;char_start&quot;:107,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;shouldFail&quot;:&quot;true&quot;,&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>In this example, calling <code>greet</code> moves the data from <code>m1</code> and <code>m2</code> into the parameters of <code>greet</code>. Both strings are dropped at the end of <code>greet</code>, and therefore cannot be used within <code>main</code>. If we try to read them like in the operation <code>format!(..)</code>, then that would be undefined behavior. The Rust compiler therefore rejects this program with the same error we saw last section:</p>
<pre><code class="language-text">error[E0382]: borrow of moved value: `m1`
 --&gt; test.rs:5:30
 (...rest of the error...)
</code></pre>
<p>This move behavior is extremely inconvenient. Programs often need to use a string more than once. An alternative <code>greet</code> could return ownership of the strings, like this:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\n    let m1 = String::from(\&quot;Hello\&quot;);\n    let m2 = String::from(\&quot;world\&quot;);\n    let (m1_again, m2_again) = greet(m1, m2);\n    let s = format!(\&quot;{} {}\&quot;, m1_again, m2_again);\n}\n\nfn greet(g1: String, g2: String) -&gt; (String, String) {\n    println!(\&quot;{} {}!\&quot;, g1, g2);\n    (g1, g2)\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[83,179]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Success&quot;},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:47,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:83,&quot;char_start&quot;:52,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:284,&quot;char_start&quot;:183,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;g1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:235,&quot;char_start&quot;:183,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:284,&quot;char_start&quot;:183,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;g1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:268,&quot;char_start&quot;:242,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:284,&quot;char_start&quot;:183,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;(return)&quot;,{&quot;type&quot;:&quot;Tuple&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}},{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]}],[&quot;g1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:282,&quot;char_start&quot;:274,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m1_again&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2_again&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:32},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m1_again&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2_again&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;s&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:11}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:2}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:16}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:179,&quot;char_start&quot;:134,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:180,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>However, this style of program is quite verbose. Rust provides a concise style of reading and writing without moves through references.</p>
<h3 id="references-are-non-owning-pointers"><a class="header" href="#references-are-non-owning-pointers">References Are Non-Owning Pointers</a></h3>
<p>A <strong>reference</strong> is a kind of pointer. Here's an example of a reference that rewrites our <code>greet</code> program in a more convenient manner:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\n    let m1 = String::from(\&quot;Hello\&quot;);\n    let m2 = String::from(\&quot;world\&quot;);\n    greet(&amp;m1, &amp;m2); // note the ampersands\n    let s = format!(\&quot;{} {}\&quot;, m1, m2);\n}\n\nfn greet(g1: &amp;String, g2: &amp;String) { // note the ampersands\n    println!(\&quot;{} {}!\&quot;, g1, g2);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[83,104,233]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Success&quot;},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:47,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:83,&quot;char_start&quot;:52,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:104,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:104,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:262,&quot;char_start&quot;:169,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;g1&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;m1&quot;}}},&quot;range&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;m2&quot;}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:203,&quot;char_start&quot;:169,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:104,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:262,&quot;char_start&quot;:169,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;g1&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;m1&quot;}}},&quot;range&quot;:null}}],[&quot;g2&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;m2&quot;}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:259,&quot;char_start&quot;:233,&quot;filename&quot;:0},&quot;name&quot;:&quot;greet&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:104,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}},{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:32},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;m1&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;m2&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:5}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:1}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:5}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;s&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:11}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:2}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:16}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:165,&quot;char_start&quot;:132,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:167,&quot;char_start&quot;:166,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>The expression <code>&amp;m1</code> uses the ampersand operator to create a reference to (or &quot;borrow&quot;) <code>m1</code>. The type of the <code>greet</code> parameter <code>g1</code> is changed to <code>&amp;String</code>, meaning &quot;a reference to a <code>String</code>&quot;. </p>
<!-- At runtime, the references look like this:

<img src="img/experiment/ch04-02-stack1.jpg" class="center" width="350" /> -->
<p>Observe at L2 that there are two steps from <code>g1</code> to the string &quot;Hello&quot;. <code>g1</code> is a reference that points to <code>m1</code> on the stack, and <code>m1</code> is a String containing a box that points to &quot;Hello&quot; on the heap.</p>
<p>While <code>m1</code> owns the heap data &quot;Hello&quot;, <code>g1</code> does <em>not</em> own either <code>m1</code> or &quot;Hello&quot;. Therefore after <code>greet</code> ends and the program reaches L3, no heap data has been deallocated. Only the stack frame for <code>greet</code> disappears. This fact is consistent with our <em>Moved Heap Data Principle</em>. Because <code>g1</code> did not own &quot;Hello&quot;, Rust did not deallocate &quot;Hello&quot; on behalf of <code>g1</code>.</p>
<p>References are <strong>non-owning pointers</strong>, because they do not own the data they point to.</p>
<h3 id="dereferencing-a-pointer-accesses-its-data"><a class="header" href="#dereferencing-a-pointer-accesses-its-data">Dereferencing a Pointer Accesses Its Data</a></h3>
<p>The previous examples using boxes and strings have not shown how Rust &quot;follows&quot; a pointer to its data. For example, the <code>println!</code> macro has mysteriously worked for both owned strings of type <code>String</code>, and for string references of type <code>&amp;String</code>. The underlying mechanism is the <strong>dereference</strong> operator, written with an asterisk (<code>*</code>). For example, here's a program that uses dereferences in a few different ways:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut x: Box&lt;i32&gt; = Box::new(1);\nlet a: i32 = *x;         // *x reads the heap value, so a = 1\n*x += 1;                 // *x on the left-side modifies the heap value, \n                         //     so x points to the value 2\n\nlet r1: &amp;Box&lt;i32&gt; = &amp;x;  // r1 points to x on the stack\nlet b: i32 = **r1;       // two dereferences get us to the heap value\n\nlet r2: &amp;i32 = &amp;*x;      // r2 points to the heap value directly\nlet c: i32 = *r2;    // so only one dereference is needed to read it\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,12],&quot;interp&quot;:{&quot;state_locations&quot;:[452]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Success&quot;},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;x&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:46,&quot;char_start&quot;:12,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;x&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}],[&quot;a&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}]],&quot;location&quot;:{&quot;char_end&quot;:63,&quot;char_start&quot;:47,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;x&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}],[&quot;a&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}]],&quot;location&quot;:{&quot;char_end&quot;:117,&quot;char_start&quot;:109,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;x&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}],[&quot;a&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}],[&quot;r1&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;x&quot;}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:266,&quot;char_start&quot;:243,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;x&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}],[&quot;a&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}],[&quot;r1&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;x&quot;}}},&quot;range&quot;:null}}],[&quot;b&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]],&quot;location&quot;:{&quot;char_end&quot;:317,&quot;char_start&quot;:299,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;x&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}],[&quot;a&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}],[&quot;r1&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;x&quot;}}},&quot;range&quot;:null}}],[&quot;b&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}],[&quot;r2&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:389,&quot;char_start&quot;:370,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;x&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}],[&quot;a&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}],[&quot;r1&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;x&quot;}}},&quot;range&quot;:null}}],[&quot;b&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}],[&quot;r2&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}],[&quot;c&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]],&quot;location&quot;:{&quot;char_end&quot;:452,&quot;char_start&quot;:435,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:505,&quot;char_start&quot;:504,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{}"  data-no-interact="true" ></div>
<p>Observe the difference between <code>r1</code> pointing to <code>x</code> on the stack, and <code>r2</code> pointing to the heap value <code>2</code>.</p>
<p>You probably won't see the dereference operator very often when you read Rust code. Rust implicitly inserts dereferences and references in certain cases, such as calling a method with the dot operator. For example, this program shows two equivalent ways of calling the <a href="https://doc.rust-lang.org/std/primitive.i32.html#method.abs"><code>i32::abs</code></a> (absolute value) and <a href="https://doc.rust-lang.org/std/primitive.str.html#method.len"><code>str::len</code></a> (string length) functions:</p>
<pre><code class="language-rust ignore"><span class="boring">fn main()  {
</span>let x: Box&lt;i32&gt; = Box::new(-1);
let x_abs1 = i32::abs(*x); // explicit dereference
let x_abs2 = x.abs();      // implicit dereference
assert_eq!(x_abs1, x_abs2);

let r: &amp;Box&lt;i32&gt; = &amp;x;
let r_abs1 = i32::abs(**r); // explicit dereference (twice)
let r_abs2 = r.abs();       // implicit dereference (twice)
assert_eq!(r_abs1, r_abs2);

let s = String::from(&quot;Hello&quot;);
let s_len1 = str::len(&amp;s); // explicit reference
let s_len2 = s.len();      // implicit reference
assert_eq!(s_len1, s_len2);
<span class="boring">}</span></code></pre>
<p>This example shows implicit conversions in three ways:</p>
<ol>
<li>
<p>The <code>i32::abs</code> function expects an input of type <code>i32</code>. To call <code>abs</code> with a <code>Box&lt;i32&gt;</code>, you can explicitly dereference the box like <code>i32::abs(*x)</code>. You can also implicitly dereference the box using method-call syntax like <code>x.abs()</code>. The dot syntax is syntactic sugar for the function-call syntax.</p>
</li>
<li>
<p>This implicit conversion works for multiple layers of pointers. For example, calling <code>abs</code> on a reference to a box <code>r: &amp;Box&lt;i32&gt;</code> will insert two dereferences. </p>
</li>
<li>
<p>This conversion also works the opposite direction. The function <code>str::len</code> expects a reference <code>&amp;str</code>. If you call <code>len</code> on an owned <code>String</code>, then Rust will insert a single borrowing operator. (In fact, there is a further conversion from <code>String</code> to <code>str</code>!)</p>
</li>
</ol>
<p>We will say more about method calls and implicit conversions in later chapters. For now, the important takeaway is that these conversions are happening with method calls and some macros like <code>println</code>. We want to unravel all the &quot;magic&quot; of Rust so you can have a clear mental model of how Rust works.</p>
<div class="quiz-placeholder" data-quiz-name="ch04-02-references-sec1-basics"  data-quiz-questions="{&quot;questions&quot;:[{&quot;context&quot;:&quot;`***y` is the correct expression. `y` has the type `Box&lt;&amp;Box&lt;i32&gt;&gt;`. It is a heap pointer to a stack reference \nto a heap pointer. Therefore `y` must be dereferenced three times for each layer of indirection.\n&quot;,&quot;id&quot;:&quot;0b8dbb4f-7c56-4b6e-8358-95c7b46f90c3&quot;,&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;3&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;Consider the following program, showing the state of memory after the last line:\n&lt;div class=\&quot;aquascope-embed\&quot; data-code=\&quot;&amp;quot;fn main() {\\nlet x = Box::new(0);\\nlet y = Box::new(&amp;amp;x);\\n}&amp;quot;\&quot;  data-annotations=\&quot;{&amp;quot;hidden_lines&amp;quot;:[1,4],&amp;quot;interp&amp;quot;:{&amp;quot;state_locations&amp;quot;:[54]},&amp;quot;stepper&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[],&amp;quot;focused_paths&amp;quot;:{}},&amp;quot;boundaries&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[]}}\&quot;  data-operations=\&quot;[&amp;quot;interpreter&amp;quot;]\&quot;  data-responses=\&quot;{&amp;quot;interpreter&amp;quot;:{&amp;quot;Ok&amp;quot;:{&amp;quot;result&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Success&amp;quot;},&amp;quot;steps&amp;quot;:[{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:56,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;x&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Box&amp;quot;},&amp;quot;fields&amp;quot;:[[&amp;quot;0&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Box&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:32,&amp;quot;char_start&amp;quot;:12,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Stack&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;frame&amp;quot;:0,&amp;quot;local&amp;quot;:&amp;quot;x&amp;quot;}}},&amp;quot;range&amp;quot;:null}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:56,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;x&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Box&amp;quot;},&amp;quot;fields&amp;quot;:[[&amp;quot;0&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Box&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;y&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Box&amp;quot;},&amp;quot;fields&amp;quot;:[[&amp;quot;0&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:1}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Box&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:54,&amp;quot;char_start&amp;quot;:33,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:56,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:56,&amp;quot;char_start&amp;quot;:55,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}}]}}}\&quot;  data-config=\&quot;{}\&quot;  data-no-interact=\&quot;true\&quot; &gt;&lt;/div&gt;\n\nIf you wanted to copy out the number `0` through `y`, how many dereferences would you need to use? \nWrite your answer as a digit. For example, if the correct expression is `*y`, then the answer is 1. \n&quot;}},{&quot;context&quot;:&quot;References are non-owning pointers. Therefore passing `&amp;v` to `get_first` does not move ownership of `v` into `get_first`,\nand subsequently `v` is not deallocated after `get_first` ends.\n&quot;,&quot;id&quot;:&quot;7cf19153-3647-4afc-953a-f9392ddb96fb&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;`vr` is a reference which does not own the vector it points to&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;`vr` is not mutated within `get_first`&quot;,&quot;`get_first` returns a value of type `i32`, not the vector itself&quot;,&quot;`v` is used after calling `get_first` in the `println`&quot;],&quot;prompt&quot;:&quot;Consider the following program, showing the state of memory after the last line:\n \n&lt;div class=\&quot;aquascope-embed\&quot; data-code=\&quot;&amp;quot;fn get_first(vr: &amp;amp;Vec&amp;lt;i32&amp;gt;) -&amp;gt; i32 {\\n  vr[0]\\n}\\n\\nfn main() {\\n  let mut v = vec![0, 1, 2];\\n  let n = get_first(&amp;amp;v);\\n  println!(\\&amp;quot;{} {}\\&amp;quot;, n, v[1]); \\n}&amp;quot;\&quot;  data-annotations=\&quot;{&amp;quot;hidden_lines&amp;quot;:[],&amp;quot;interp&amp;quot;:{&amp;quot;state_locations&amp;quot;:[143]},&amp;quot;stepper&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[],&amp;quot;focused_paths&amp;quot;:{}},&amp;quot;boundaries&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[]}}\&quot;  data-operations=\&quot;[&amp;quot;interpreter&amp;quot;]\&quot;  data-responses=\&quot;{&amp;quot;interpreter&amp;quot;:{&amp;quot;Ok&amp;quot;:{&amp;quot;result&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Success&amp;quot;},&amp;quot;steps&amp;quot;:[{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:88,&amp;quot;char_start&amp;quot;:62,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:91,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:91,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;},{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:46,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;vr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Stack&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;frame&amp;quot;:0,&amp;quot;local&amp;quot;:&amp;quot;v&amp;quot;}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:34,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;get_first&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:91,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;},{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:46,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;(return)&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0}],[&amp;quot;vr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Stack&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;frame&amp;quot;:0,&amp;quot;local&amp;quot;:&amp;quot;v&amp;quot;}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:44,&amp;quot;char_start&amp;quot;:39,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;get_first&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:91,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;},{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:46,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;(return)&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0}],[&amp;quot;vr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Stack&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;frame&amp;quot;:0,&amp;quot;local&amp;quot;:&amp;quot;v&amp;quot;}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:46,&amp;quot;char_start&amp;quot;:45,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;get_first&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;n&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:91,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;n&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:0}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:142,&amp;quot;char_start&amp;quot;:116,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:48,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:146,&amp;quot;char_start&amp;quot;:145,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}}]}}}\&quot;  data-config=\&quot;{}\&quot;  data-no-interact=\&quot;true\&quot; &gt;&lt;/div&gt;\n\nWhich of the following best explains why `v` is not deallocated after calling `get_first`?\n&quot;}}]}"  data-quiz-fullscreen=""  data-quiz-cache-answers="" ></div>
<h3 id="rust-avoids-simultaneous-aliasing-and-mutation"><a class="header" href="#rust-avoids-simultaneous-aliasing-and-mutation">Rust Avoids Simultaneous Aliasing and Mutation</a></h3>
<p>Pointers are a powerful and dangerous feature because they enable <strong>aliasing</strong>. Aliasing is accessing the same data through different variables. On its own, aliasing is harmless. But combined with <strong>mutation</strong>, we have a recipe for disaster. One variable can &quot;pull the rug out&quot; from another variable in many ways, for example:</p>
<ul>
<li>By deallocating the aliased data, leaving the other variable to point to deallocated memory.</li>
<li>By mutating the aliased data, invalidating runtime properties expected by the other variable.</li>
<li>By <em>concurrently</em> mutating the aliased data, causing a data race with nondeterministic behavior for the other variable.</li>
</ul>
<p>As a running example, we are going to look at programs using the vector data structure, <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec</code></a>. Unlike arrays which have a fixed length, vectors have a variable length by storing their elements in the heap. For example, <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html#method.push"><code>Vec::push</code></a> adds an element to the end of a vector, like this:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\nvec.push(4);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,4],&quot;interp&quot;:{&quot;state_locations&quot;:[50,63]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Success&quot;},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:65,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:12,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:4}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:65,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:4}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:6}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:63,&quot;char_start&quot;:51,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:65,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:65,&quot;char_start&quot;:64,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>The macro <code>vec!</code> creates a vector with the elements between the brackets. The vector <code>vec</code> has type <code>Vec&lt;i32&gt;</code>. The syntax <code>&lt;i32&gt;</code> means the elements of the vector have type <code>i32</code>.</p>
<p>One important implementation detail is that <code>vec</code> allocates a heap array of a certain <em>capacity</em>. We can peek into <code>Vec</code>'s internals and see this detail for ourselves:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,3],&quot;interp&quot;:{&quot;state_locations&quot;:[50]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Success&quot;},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:52,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:12,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:52,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:52,&quot;char_start&quot;:51,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;horizontal&quot;:&quot;true&quot;,&quot;concreteTypes&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<blockquote>
<p><em>Note:</em> click the binocular icon in the top right of the diagram to toggle this detailed view in any runtime diagram.</p>
</blockquote>
<p>Notice that the vector has a length (<code>len</code>) of 3 and a capacity (<code>cap</code>) of 3. The vector is at capacity. So when we do a <code>push</code>, the vector has to create a new allocation with larger capacity, copy all the elements over, and deallocate the original heap array. In the diagram above, the array <code>1 2 3 4</code> is in a (potentially) different memory location than the original array <code>1 2 3</code>.</p>
<p>To tie this back to memory safety, let's bring references into the mix. Say we created a reference to a vector's heap data. Then that reference can be invalidated by a push, as simulated below:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\nlet num: &amp;i32 = &amp;vec[2];\nvec.push(4);\nprintln!(\&quot;Third element is {}\&quot;, *num);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[75,88,127]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Error&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;PointerUseAfterFree&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:12,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}],[&quot;num&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:2}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:75,&quot;char_start&quot;:51,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:4}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:4}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:6}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}],[&quot;num&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;location&quot;:{&quot;char_end&quot;:88,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:4}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:129,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:4}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:6}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}],[&quot;num&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;location&quot;:{&quot;char_end&quot;:126,&quot;char_start&quot;:89,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;horizontal&quot;:&quot;true&quot;,&quot;shouldFail&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>Initially, <code>vec</code> points to an array with 3 elements on the heap. Then <code>num</code> is created as a reference to the third element, as seen at L1. However, the operation <code>v.push(4)</code> resizes <code>vec</code>. The resize will deallocate the previous array and allocate a new, bigger array. In the process, <code>num</code> is left pointing to invalid memory. Therefore at L3, dereferencing <code>*num</code> reads invalid memory, causing undefined behavior.</p>
<p>In more abstract terms, the issue is that the vector <code>vec</code> is both aliased (by the reference <code>num</code>) and mutated (by the operation <code>vec.push(4)</code>). So to avoid these kinds of issues, Rust follows a basic principle:</p>
<blockquote>
<p><strong>Pointer Safety Principle</strong>: data should never be aliased and mutated at the same time.</p>
</blockquote>
<p>Data can be aliased. Data can be mutated. But data cannot be <em>both</em> aliased <em>and</em> mutated. For example, Rust enforces this principle for boxes (owned pointers) by disallowing aliasing. Assigning a box from one variable to another will move ownership, invalidating the previous variable. Owned data can only be accessed through the owner — no aliases.</p>
<p>However, because references are non-owning pointers, they need different rules than boxes to ensure the <em>Pointer Safety Principle</em>. By design, references are meant to temporarily create aliases. In the rest of this section, we will explain the basics of how Rust ensures the safety of references through the <strong>borrow checker.</strong></p>
<h3 id="references-change-permissions-on-paths"><a class="header" href="#references-change-permissions-on-paths">References Change Permissions on Paths</a></h3>
<p>The core idea behind the borrow checker is that variables have three kinds of <strong>permissions</strong> on their data:</p>
<ul>
<li><strong>Read</strong> (<span class="perm read">R</span>): data can be copied to another location.</li>
<li><strong>Write</strong> (<span class="perm write">W</span>): data can be mutated in-place.</li>
<li><strong>Own</strong> (<span class="perm own">O</span>): data can be moved or dropped.</li>
</ul>
<p>These permissions don't exist at runtime, only within the compiler. They describe how the compiler &quot;thinks&quot; about your program before the program is executed.</p>
<p>By default, a variable has read/own permissions (<span class="perm read">R</span><span class="perm own">O</span>) on its data. If a variable is annotated with <code>let mut</code>, then it also has the write permission (<span class="perm write">W</span>). The key idea is 
that <strong>references can temporarily remove these permissions.</strong> </p>
<p>To illustrate this idea, let's look at the permissions on a variation of the program above that is actually safe. The <code>push</code> has been moved after the <code>println!</code>. The permissions in this program are visualized with a new kind of diagram. The diagram shows the changes in permissions on each line.</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\nlet num: &amp;i32 = &amp;vec[2];\nprintln!(\&quot;Third element is {}\&quot;, *num);\nvec.push(4);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:68},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:108},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:118}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:71,&quot;char_start&quot;:68,&quot;filename&quot;:0},&quot;1&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;2&quot;:{&quot;char_end&quot;:126,&quot;char_start&quot;:115,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:74,&quot;char_start&quot;:68,&quot;filename&quot;:0},{&quot;char_end&quot;:112,&quot;char_start&quot;:108,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:126,&quot;char_start&quot;:115,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:127,&quot;char_start&quot;:127,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:127,&quot;char_start&quot;:126,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:50,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:23,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:75,&quot;char_start&quot;:75,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:114,&quot;char_start&quot;:114,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>Let's walk through each line:</p>
<ol>
<li>After <code>let mut vec = (...)</code>, the variable <code>vec</code> has been initialized (indicated by <i class="fa fa-level-up"></i>). It gains <span><span class="perm-diff-add">+</span><span class="perm read">R</span></span><span><span class="perm-diff-add">+</span><span class="perm write">W</span></span><span><span class="perm-diff-add">+</span><span class="perm own">O</span></span> permissions (the plus sign indicates gain).</li>
<li>After <code>let num = &amp;vec[2]</code>, the data in <code>vec</code> has been <strong>borrowed</strong> by <code>num</code> (indicated by <i class="fa fa-arrow-right"></i>). Three things happen:
<ul>
<li>The borrow removes <span class="perm-diff-sub-container"><div class="perm-diff-sub"></div><span class="perm write">W</span></span><span class="perm-diff-sub-container"><div class="perm-diff-sub"></div><span class="perm own">O</span></span> permissions from <code>vec</code> (the slash indicates loss). <code>vec</code> cannot be written or owned, but it can still be read.</li>
<li>The variable <code>num</code> has gained <span class="perm read">R</span><span class="perm own">O</span> permissions. <code>num</code> is not writable (the missing <span class="perm write">W</span> permission is shown as a dash <span class="perm write">‒</span>) because it was not marked <code>let mut</code>.</li>
<li>The <strong>path</strong> <code>*num</code> has gained <span class="perm read">R</span><span class="perm own">O</span> permissions.</li>
</ul>
</li>
<li>After <code>println!(...)</code>, then <code>num</code> is no longer in use, so <code>vec</code> is no longer borrowed. Therefore:
<ul>
<li><code>vec</code> regains its <span class="perm write">W</span><span class="perm own">O</span> permissions (indicated by <i class="fa fa-rotate-left"></i>).</li>
<li><code>num</code> and <code>*num</code> have lost all of their permissions (indicated by <i class="fa fa-level-down"></i>).</li>
</ul>
</li>
<li>After <code>vec.push(4)</code>, then <code>vec</code> is no longer in use, and it loses all of its permissions.</li>
</ol>
<p>Next, let's explore a few nuances of the diagram. First, why do you see both <code>num</code> and <code>*num</code>? Because it's different to access data through a reference, versus to manipulate the reference itself. For example, say we declared a reference to a number with <code>let mut</code>:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet x = 0;\nlet mut x_ref = &amp;x;\n println!(\&quot;{x_ref} {x}\&quot;);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,4,5],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:40},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:55},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;loan_drop_refined&quot;:0,&quot;loan_write_refined&quot;:0,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:63}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:41,&quot;char_start&quot;:39,&quot;filename&quot;:0},&quot;1&quot;:{&quot;char_end&quot;:60,&quot;char_start&quot;:55,&quot;filename&quot;:0},&quot;2&quot;:{&quot;char_end&quot;:64,&quot;char_start&quot;:63,&quot;filename&quot;:0},&quot;3&quot;:{&quot;char_end&quot;:67,&quot;char_start&quot;:44,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:41,&quot;char_start&quot;:39,&quot;filename&quot;:0},{&quot;char_end&quot;:60,&quot;char_start&quot;:55,&quot;filename&quot;:0},{&quot;char_end&quot;:64,&quot;char_start&quot;:63,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:60,&quot;char_start&quot;:55,&quot;filename&quot;:0},{&quot;char_end&quot;:64,&quot;char_start&quot;:63,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:64,&quot;char_start&quot;:63,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:67,&quot;char_start&quot;:44,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:42,&quot;char_start&quot;:42,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:36,&quot;char_start&quot;:27,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;x_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;*x_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:67,&quot;char_start&quot;:44,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:68,&quot;char_start&quot;:68,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:67,&quot;char_start&quot;:44,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;x&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;x_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;*x_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:67,&quot;char_start&quot;:44,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:22,&quot;char_start&quot;:22,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:17,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;x&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:36,&quot;char_start&quot;:27,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>Notice that <code>x_ref</code> has the <span class="perm write">W</span> permission, while <code>*x_ref</code> does not. That means we can assign <code>x_ref</code> to a different reference (e.g. <code>x_ref = &amp;y</code>), but we cannot mutate the pointed data (e.g. <code>*x_ref += 1</code>).</p>
<blockquote>
<p><em>Note:</em> you might wonder why <code>*num</code> and <code>*x_ref</code> have the <span class="perm own">O</span> permission, since references are non-owning pointers. That's because the vector contains numbers of type <code>i32</code>, and <code>i32</code> is a <em>copyable</em> type. We will discuss this difference more next section in <a href="ch04-03-fixing-ownership-errors.html#fixing-an-unsafe-program-copying-vs-moving-out-of-a-collection">&quot;Copying vs. Moving Out of a Collection&quot;</a>.</p>
</blockquote>
<p>More generally, permissions are defined on <strong>paths</strong> and not just variables. A path is anything you can put on the left-hand side of an assignment. Paths include:</p>
<ul>
<li>Variables, like <code>a</code>.</li>
<li>Dereferences of paths, like <code>*a</code>.</li>
<li>Array accesses of paths, like <code>a[0]</code>.</li>
<li>Fields of paths, like <code>a.0</code> for tuples or <code>a.field</code> for structs (discussed next chapter).</li>
<li>Any combination of the above, like <code>*((*a)[0].1)</code>.</li>
</ul>
<p>Second, why do paths lose permissions when they become unused? Because some permissions are mutually exclusive. If <code>num = &amp;vec[2]</code>, then <code>vec</code> cannot be mutated or dropped while <code>num</code> is in use. But that doesn't mean it's invalid to use <code>num</code> for more time. For example, if we add another <code>print</code> to the above program, then <code>num</code> simply loses its permissions later:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\nlet num: &amp;i32 = &amp;vec[2];\nprintln!(\&quot;Third element is {}\&quot;, *num);\nprintln!(\&quot;Again, the third element is {}\&quot;, *num);\nvec.push(4);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,7],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:68},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:108},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:158},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:168}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:71,&quot;char_start&quot;:68,&quot;filename&quot;:0},&quot;1&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;2&quot;:{&quot;char_end&quot;:163,&quot;char_start&quot;:115,&quot;filename&quot;:0},&quot;3&quot;:{&quot;char_end&quot;:176,&quot;char_start&quot;:165,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:74,&quot;char_start&quot;:68,&quot;filename&quot;:0},{&quot;char_end&quot;:106,&quot;char_start&quot;:85,&quot;filename&quot;:0},{&quot;char_end&quot;:112,&quot;char_start&quot;:108,&quot;filename&quot;:0},{&quot;char_end&quot;:162,&quot;char_start&quot;:158,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:163,&quot;char_start&quot;:115,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:176,&quot;char_start&quot;:165,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:177,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:163,&quot;char_start&quot;:115,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:176,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:50,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:23,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:75,&quot;char_start&quot;:75,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:164,&quot;char_start&quot;:164,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:113,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:163,&quot;char_start&quot;:115,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<h3 id="the-borrow-checker-finds-permission-violations"><a class="header" href="#the-borrow-checker-finds-permission-violations">The Borrow Checker Finds Permission Violations</a></h3>
<p>Recall the <em>Pointer Safety Principle</em>: data should not be aliased and mutated. The goal of these permissions is to ensure that data cannot be mutated if it is aliased. Creating a reference to data (&quot;borrowing&quot; it) causes that data to be temporarily read-only until the reference is no longer used.</p>
<p>Rust uses these permissions in its <strong>borrow checker</strong>. The borrow checker looks for potentially unsafe operations involving references. Let's return to the unsafe program we saw earlier, where <code>push</code> invalidates a reference. This time we'll add another aspect to the permissions diagram:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\nlet num: &amp;i32 = &amp;vec[2];\nvec.push(4);\nprintln!(\&quot;Third element is {}\&quot;, *num);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[3,4]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:68},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;loan_drop_refined&quot;:0,&quot;loan_write_refined&quot;:0,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:79}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:71,&quot;char_start&quot;:68,&quot;filename&quot;:0},&quot;1&quot;:{&quot;char_end&quot;:87,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;2&quot;:{&quot;char_end&quot;:126,&quot;char_start&quot;:89,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:74,&quot;char_start&quot;:68,&quot;filename&quot;:0},{&quot;char_end&quot;:87,&quot;char_start&quot;:76,&quot;filename&quot;:0},{&quot;char_end&quot;:125,&quot;char_start&quot;:121,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:87,&quot;char_start&quot;:76,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:126,&quot;char_start&quot;:89,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:50,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:23,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:75,&quot;char_start&quot;:75,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:87,&quot;char_start&quot;:76,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;shouldFail&quot;:&quot;true&quot;,&quot;boundaries&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>Any time a path is used, Rust expects that path to have certain permissions depending on the operation. For example, the borrow <code>&amp;vec[2]</code> requires that <code>vec</code> is readable. Therefore the <span class="perm read">R</span> permission is shown between the operation <code>&amp;</code> and the path <code>vec</code>. The letter is filled-in because <code>vec</code> has the read permission at that line. </p>
<p>By contrast, the mutating operation <code>vec.push(4)</code> requires that <code>vec</code> is readable and writable. Both <span class="perm read">R</span> and <span class="perm write">W</span> are shown. However, <code>vec</code> does not have write permissions (it is borrowed by <code>num</code>). So the letter <span class="perm missing write">W</span> is hollow, indicating that the write permission is <em>expected</em> but <code>vec</code> does not have it.</p>
<p>If you try to compile this program, then the Rust compiler will return the following error:</p>
<pre><code class="language-text">error[E0502]: cannot borrow `vec` as mutable because it is also borrowed as immutable
 --&gt; test.rs:4:1
  |
3 | let num: &amp;i32 = &amp;vec[2];
  |                  --- immutable borrow occurs here
4 | vec.push(4);
  | ^^^^^^^^^^^ mutable borrow occurs here
5 | println!(&quot;Third element is {}&quot;, *num);
  |                                 ---- immutable borrow later used here
</code></pre>
<p>The error message explains that <code>vec</code> cannot be mutated while the reference <code>num</code> is in use. That's the surface-level reason — the underlying issue is that <code>num</code> could be invalidated by <code>push</code>. Rust catches that potential violation of memory safety.</p>
<h3 id="mutable-references-provide-unique-and-non-owning-access-to-data"><a class="header" href="#mutable-references-provide-unique-and-non-owning-access-to-data">Mutable References Provide Unique and Non-Owning Access to Data</a></h3>
<p>The references we have seen so far are read-only <strong>immutable references</strong> (also called <strong>shared references</strong>). Immutable references permit aliasing but disallow mutation. However, it is also useful to temporarily provide mutable access to data without moving it.</p>
<p>The mechanism for this is <strong>mutable references</strong> (also called <strong>unique references</strong>). Here's a simple example of a mutable reference with the accompanying permissions changes:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\nlet num: &amp;mut i32 = &amp;mut vec[2];\n*num += 1;\nprintln!(\&quot;Third element is {}\&quot;, *num);\nprintln!(\&quot;Vector is now {:?}\&quot;, vec);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,7],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:76},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:84},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:127},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:165}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:79,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;1&quot;:{&quot;char_end&quot;:82,&quot;char_start&quot;:71,&quot;filename&quot;:0},&quot;2&quot;:{&quot;char_end&quot;:82,&quot;char_start&quot;:71,&quot;filename&quot;:0},&quot;3&quot;:{&quot;char_end&quot;:131,&quot;char_start&quot;:127,&quot;filename&quot;:0},&quot;4&quot;:{&quot;char_end&quot;:132,&quot;char_start&quot;:95,&quot;filename&quot;:0},&quot;5&quot;:{&quot;char_end&quot;:168,&quot;char_start&quot;:165,&quot;filename&quot;:0},&quot;6&quot;:{&quot;char_end&quot;:169,&quot;char_start&quot;:134,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:82,&quot;char_start&quot;:76,&quot;filename&quot;:0},{&quot;char_end&quot;:93,&quot;char_start&quot;:84,&quot;filename&quot;:0},{&quot;char_end&quot;:131,&quot;char_start&quot;:127,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:82,&quot;char_start&quot;:71,&quot;filename&quot;:0},{&quot;char_end&quot;:93,&quot;char_start&quot;:84,&quot;filename&quot;:0},{&quot;char_end&quot;:131,&quot;char_start&quot;:127,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:83,&quot;char_start&quot;:71,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:131,&quot;char_start&quot;:127,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}},&quot;4&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:132,&quot;char_start&quot;:95,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:4}},&quot;5&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:168,&quot;char_start&quot;:165,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:5}},&quot;6&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:169,&quot;char_start&quot;:134,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:6}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:170,&quot;char_start&quot;:170,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:132,&quot;char_start&quot;:95,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:169,&quot;char_start&quot;:134,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:50,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:23,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:133,&quot;char_start&quot;:133,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:132,&quot;char_start&quot;:95,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:132,&quot;char_start&quot;:95,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:83,&quot;char_start&quot;:83,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:93,&quot;char_start&quot;:84,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;boundaries&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<blockquote>
<div style="margin-block-start: 1em; margin-block-end: 1em"><i>Note:</i> when the expected permissions are not strictly relevant to an example, we will abbreviate them as dots like <div class="permission-stack stack-size-2"><div class="perm read"><div class="small">•</div><div class="big">R</div></div><div class="perm write"><div class="small">•</div><div class="big">W</div></div></div>. You can hover your mouse over the circles (or tap on a touchscreen) to see the corresponding permission letters.</div>
</blockquote>
<p>A mutable reference is created with the <code>&amp;mut</code> operator. The type of <code>num</code> is written as <code>&amp;mut i32</code>. Compared to immutable references, you can see two important differences in the permissions:</p>
<ol>
<li>When <code>num</code> was an immutable reference, <code>vec</code> still had <span class="perm read">R</span> permissions. Now that <code>num</code> is a mutable reference, <code>vec</code> has lost <em>all</em> permissions while <code>num</code> is in use.</li>
<li>When <code>num</code> was an immutable reference, the path <code>*num</code> only had <span class="perm read">R</span><span class="perm own">O</span> permissions. Now that <code>num</code> is a mutable reference, <code>*num</code> has also gained the <span class="perm write">W</span> permission.</li>
</ol>
<p>The first observation is what makes mutable references <em>safe</em>. Mutable references allow mutation but prevent aliasing. The borrowed path <code>vec</code> becomes temporarily unusable, so effectively not an alias.</p>
<p>The second observation is what makes mutable references <em>useful</em>. <code>vec[2]</code> can be mutated through <code>*num</code>. For example, <code>*num += 1</code> mutates <code>vec[2]</code>. Note that <code>*num</code> has the <span class="perm write">W</span> permission, but <code>num</code> does not. <code>num</code> refers to the mutable reference itself, e.g. <code>num</code> cannot be reassigned to a <em>different</em> mutable reference.</p>
<p>Mutable references can also be temporarily &quot;downgraded&quot; to read-only references. For example:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut vec: Vec&lt;i32&gt; = vec![1, 2, 3];\nlet num: &amp;mut i32 = &amp;mut vec[2];\nlet num2: &amp;i32 = &amp;*num;\nprintln!(\&quot;{} {}\&quot;, *num, *num2);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[3,4],&quot;focused_paths&quot;:{&quot;4&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;*num&quot;}],&quot;3&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;*num&quot;}]}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:76},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:102},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;loan_drop_refined&quot;:3,&quot;loan_write_refined&quot;:3,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:126},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:132}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:79,&quot;char_start&quot;:76,&quot;filename&quot;:0},&quot;1&quot;:{&quot;char_end&quot;:82,&quot;char_start&quot;:71,&quot;filename&quot;:0},&quot;2&quot;:{&quot;char_end&quot;:82,&quot;char_start&quot;:71,&quot;filename&quot;:0},&quot;3&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:101,&quot;filename&quot;:0},&quot;4&quot;:{&quot;char_end&quot;:130,&quot;char_start&quot;:126,&quot;filename&quot;:0},&quot;5&quot;:{&quot;char_end&quot;:138,&quot;char_start&quot;:108,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:82,&quot;char_start&quot;:76,&quot;filename&quot;:0},{&quot;char_end&quot;:107,&quot;char_start&quot;:84,&quot;filename&quot;:0},{&quot;char_end&quot;:130,&quot;char_start&quot;:126,&quot;filename&quot;:0},{&quot;char_end&quot;:137,&quot;char_start&quot;:132,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:82,&quot;char_start&quot;:71,&quot;filename&quot;:0},{&quot;char_end&quot;:107,&quot;char_start&quot;:84,&quot;filename&quot;:0},{&quot;char_end&quot;:130,&quot;char_start&quot;:126,&quot;filename&quot;:0},{&quot;char_end&quot;:137,&quot;char_start&quot;:132,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:83,&quot;char_start&quot;:71,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:106,&quot;char_start&quot;:101,&quot;filename&quot;:0},{&quot;char_end&quot;:130,&quot;char_start&quot;:126,&quot;filename&quot;:0},{&quot;char_end&quot;:137,&quot;char_start&quot;:132,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}},&quot;4&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:130,&quot;char_start&quot;:126,&quot;filename&quot;:0},{&quot;char_end&quot;:137,&quot;char_start&quot;:132,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:4}},&quot;5&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:138,&quot;char_start&quot;:108,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:5}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:107,&quot;char_start&quot;:107,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:92,&quot;char_start&quot;:88,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:3},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:3},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:3},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:3},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num2&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num2&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:138,&quot;char_start&quot;:108,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:139,&quot;char_start&quot;:139,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:138,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num2&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num2&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:138,&quot;char_start&quot;:108,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:50,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:23,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:83,&quot;char_start&quot;:83,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:55,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;vec&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*num&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:92,&quot;char_start&quot;:88,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;boundaries&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<blockquote>
<p><em>Note:</em> when permission changes are not relevant to an example, we will hide them. You can view hidden steps by clicking &quot;»&quot;, and you can view hidden permissions within a step by clicking &quot;● ● ●&quot;.</p>
</blockquote>
<p>In this program, the borrow <code>&amp;*num</code> removes the <span class="perm write">W</span> permission from <code>*num</code> but <em>not</em> the <span class="perm read">R</span> permission, so <code>println!(..)</code> can read both <code>*num</code> and <code>*num2</code>.</p>
<h3 id="permissions-are-returned-at-the-end-of-a-references-lifetime"><a class="header" href="#permissions-are-returned-at-the-end-of-a-references-lifetime">Permissions Are Returned At The End of a Reference's Lifetime</a></h3>
<p>We said above that a reference changes permissions while it is &quot;in use&quot;. The phrase &quot;in use&quot; is describing a reference's <strong>lifetime</strong>, or the range of code spanning from its birth (where the reference is created) to its death (the last time(s) the reference is used).</p>
<p>For example, in this program, the lifetime of <code>y</code> starts with <code>let y = &amp;x</code>, and ends with <code>let z = *y</code>:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut x = 1;\nlet y = &amp;x;\nlet z = *y;\nx += z;\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[3,4],&quot;focused_paths&quot;:{&quot;3&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;x&quot;}],&quot;4&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;x&quot;}]}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:36},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:47},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:51},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:56}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:37,&quot;char_start&quot;:35,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:37,&quot;char_start&quot;:35,&quot;filename&quot;:0},{&quot;char_end&quot;:49,&quot;char_start&quot;:47,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:26,&quot;char_start&quot;:26,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:21,&quot;char_start&quot;:16,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;x&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:32,&quot;char_start&quot;:31,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:50,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:44,&quot;char_start&quot;:43,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;x&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;y&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*y&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;z&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:57,&quot;char_start&quot;:56,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:38,&quot;char_start&quot;:38,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:32,&quot;char_start&quot;:31,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;x&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;y&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*y&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:44,&quot;char_start&quot;:43,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:58,&quot;char_start&quot;:58,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:57,&quot;char_start&quot;:56,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;x&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;z&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:60,&quot;char_start&quot;:10,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;boundaries&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>The <span class="perm write">W</span> permission on <code>x</code> is returned to <code>x</code> after the lifetime of <code>y</code> has ended, like we have seen before.</p>
<p>In the previous examples, a lifetime has been a contiguous region of code. However, once we introduce control flow, this is not necessarily the case. For example, here is a function that capitalizes the first character in a vector of ASCII characters:</p>
<div class="aquascope-embed" data-code="&quot;fn ascii_capitalize(v: &amp;mut Vec&lt;char&gt;) {\n    let c = &amp;v[0];\n    if c.is_ascii_lowercase() {\n        let up = c.to_ascii_uppercase();\n        v[0] = up;\n    } else {\n        println!(\&quot;Already capitalized: {:?}\&quot;, v);\n    }\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[2,4,6],&quot;focused_paths&quot;:{&quot;6&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;*v&quot;}],&quot;4&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;*v&quot;}],&quot;2&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;*v&quot;}]}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:54},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:68},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:110},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:148},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:211}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;char_end&quot;:55,&quot;char_start&quot;:54,&quot;filename&quot;:0},&quot;1&quot;:{&quot;char_end&quot;:142,&quot;char_start&quot;:141,&quot;filename&quot;:0},&quot;2&quot;:{&quot;char_end&quot;:212,&quot;char_start&quot;:211,&quot;filename&quot;:0},&quot;3&quot;:{&quot;char_end&quot;:213,&quot;char_start&quot;:173,&quot;filename&quot;:0}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:58,&quot;char_start&quot;:54,&quot;filename&quot;:0},{&quot;char_end&quot;:89,&quot;char_start&quot;:67,&quot;filename&quot;:0},{&quot;char_end&quot;:131,&quot;char_start&quot;:109,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:150,&quot;char_start&quot;:141,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:212,&quot;char_start&quot;:211,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;char_end&quot;:213,&quot;char_start&quot;:173,&quot;filename&quot;:0}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;char_end&quot;:59,&quot;char_start&quot;:59,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:49,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;c&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*c&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:89,&quot;char_start&quot;:67,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:151,&quot;char_start&quot;:151,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:150,&quot;char_start&quot;:148,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;up&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:151,&quot;char_start&quot;:150,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:214,&quot;char_start&quot;:214,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:213,&quot;char_start&quot;:173,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:213,&quot;char_start&quot;:173,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:40,&quot;char_start&quot;:40,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:49,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;char_end&quot;:50,&quot;char_start&quot;:49,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:164,&quot;char_start&quot;:164,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:89,&quot;char_start&quot;:67,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;c&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*c&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:213,&quot;char_start&quot;:173,&quot;filename&quot;:0}}]},{&quot;location&quot;:{&quot;char_end&quot;:132,&quot;char_start&quot;:132,&quot;filename&quot;:0},&quot;state&quot;:[{&quot;from&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:104,&quot;filename&quot;:0},&quot;state&quot;:[[&quot;v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*v&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;c&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*c&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;up&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;char_end&quot;:150,&quot;char_start&quot;:148,&quot;filename&quot;:0}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;,&quot;boundaries&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>The variable <code>c</code> has a different lifetime in each branch of the if-statement. In the then-block, <code>c</code> is used in the expression <code>c.to_ascii_uppercase()</code>. Therefore <code>*v</code> does not regain the <span class="perm write">W</span> permission until after that line.</p>
<p>However, in the else-block, <code>c</code> is not used. <code>*v</code> immediately regains the <span class="perm write">W</span> permission on entry to the else-block.</p>
<div class="quiz-placeholder" data-quiz-name="ch04-02-references-sec2-perms"  data-quiz-questions="{&quot;questions&quot;:[{&quot;context&quot;:&quot;The mutable borrow `t = &amp;mut s` removes all permissions on `s` while `t` is live.\n&quot;,&quot;id&quot;:&quot;2e273ac2-6f06-4c19-a831-1d44eed89323&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:[&quot;No permissions&quot;]},&quot;prompt&quot;:{&quot;answerIndex&quot;:3,&quot;distractors&quot;:[&quot;R&quot;,&quot;W&quot;,&quot;O&quot;],&quot;prompt&quot;:&quot;Consider the permissions in the following program:\n\n&lt;div class=\&quot;aquascope-embed\&quot; data-code=\&quot;&amp;quot;fn main() {\\nlet mut s = String::from(\\&amp;quot;Hello\\&amp;quot;);\\nlet t = &amp;amp;mut s;\\n/* here */\\nt.push_str(\\&amp;quot; world\\&amp;quot;);\\nprintln!(\\&amp;quot;{}\\&amp;quot;, s);\\n}&amp;quot;\&quot;  data-annotations=\&quot;{&amp;quot;hidden_lines&amp;quot;:[1,7],&amp;quot;interp&amp;quot;:{&amp;quot;state_locations&amp;quot;:[]},&amp;quot;stepper&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[],&amp;quot;focused_paths&amp;quot;:{}},&amp;quot;boundaries&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[]}}\&quot;  data-operations=\&quot;[&amp;quot;permissions&amp;quot;]\&quot;  data-responses=\&quot;{&amp;quot;permissions&amp;quot;:[{&amp;quot;Ok&amp;quot;:{&amp;quot;boundaries&amp;quot;:[{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:true,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:true,&amp;quot;type_writeable&amp;quot;:true},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;location&amp;quot;:60},{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:false,&amp;quot;type_writeable&amp;quot;:true},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;location&amp;quot;:75},{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:true,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:true,&amp;quot;type_writeable&amp;quot;:true},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;location&amp;quot;:111}],&amp;quot;loan_points&amp;quot;:{&amp;quot;0&amp;quot;:{&amp;quot;char_end&amp;quot;:61,&amp;quot;char_start&amp;quot;:55,&amp;quot;filename&amp;quot;:0},&amp;quot;1&amp;quot;:{&amp;quot;char_end&amp;quot;:94,&amp;quot;char_start&amp;quot;:74,&amp;quot;filename&amp;quot;:0},&amp;quot;2&amp;quot;:{&amp;quot;char_end&amp;quot;:112,&amp;quot;char_start&amp;quot;:111,&amp;quot;filename&amp;quot;:0},&amp;quot;3&amp;quot;:{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:96,&amp;quot;filename&amp;quot;:0}},&amp;quot;loan_regions&amp;quot;:{&amp;quot;0&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;char_end&amp;quot;:61,&amp;quot;char_start&amp;quot;:55,&amp;quot;filename&amp;quot;:0},{&amp;quot;char_end&amp;quot;:94,&amp;quot;char_start&amp;quot;:74,&amp;quot;filename&amp;quot;:0}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:0}},&amp;quot;1&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;char_end&amp;quot;:94,&amp;quot;char_start&amp;quot;:74,&amp;quot;filename&amp;quot;:0}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:1}},&amp;quot;2&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;char_end&amp;quot;:112,&amp;quot;char_start&amp;quot;:111,&amp;quot;filename&amp;quot;:0}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:2}},&amp;quot;3&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:96,&amp;quot;filename&amp;quot;:0}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:3}}},&amp;quot;move_points&amp;quot;:{},&amp;quot;move_regions&amp;quot;:{},&amp;quot;steps&amp;quot;:[{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:46,&amp;quot;char_start&amp;quot;:46,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:21,&amp;quot;char_start&amp;quot;:16,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;s&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:52,&amp;quot;char_start&amp;quot;:51,&amp;quot;filename&amp;quot;:0}}]},{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:62,&amp;quot;char_start&amp;quot;:62,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:52,&amp;quot;char_start&amp;quot;:51,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;s&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:0},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:0},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:0},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}],[&amp;quot;t&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*t&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:94,&amp;quot;char_start&amp;quot;:74,&amp;quot;filename&amp;quot;:0}}]},{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:95,&amp;quot;char_start&amp;quot;:95,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:94,&amp;quot;char_start&amp;quot;:74,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;s&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}],[&amp;quot;t&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*t&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:95,&amp;quot;char_start&amp;quot;:94,&amp;quot;filename&amp;quot;:0}}]},{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:114,&amp;quot;char_start&amp;quot;:114,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:95,&amp;quot;char_start&amp;quot;:94,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;s&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:113,&amp;quot;char_start&amp;quot;:96,&amp;quot;filename&amp;quot;:0}}]}]}}]}\&quot;  data-config=\&quot;{&amp;quot;stepper&amp;quot;:&amp;quot;true&amp;quot;}\&quot;  data-no-interact=\&quot;true\&quot; &gt;&lt;/div&gt;\n\nAt the point marked `/* here */`, what are the permissions on the path `s`? Select each permission below, or select \&quot;no permissions\&quot; \nif the path has no permissions.\n&quot;}},{&quot;context&quot;:&quot;When `get_first` is called, Rust recognizes that the returned string `first` could point to data within `strs`, so `strs` loses \nwrite permissions. Once the `first` variable is no longer used (after the if-condition), then `strs` regains write permissions.\n&quot;,&quot;id&quot;:&quot;b431f43e-9a6f-4715-ae88-8896fca6ff3b&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;`get_first` returns an immutable reference to data within `strs`, so `strs` is not writable while `first` is live&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;`strs` is not writable while the immutable reference `&amp;strs` passed to `get_first` is live&quot;,&quot;`strs` does not need write permissions until the `strs.push(..)` operation, so it only regains write permissions at that statement&quot;,&quot;Because `first` refers to `strs`, then `strs` can only be mutated within a nested scope like the if-statement&quot;],&quot;prompt&quot;:&quot;Consider the permissions in the following program:\n\n&lt;div class=\&quot;aquascope-embed\&quot; data-code=\&quot;&amp;quot;fn get_first(v: &amp;amp;Vec&amp;lt;String&amp;gt;) -&amp;gt; &amp;amp;str {\\n    &amp;amp;v[0]\\n}\\n\\nfn main() {\\n    let mut strs = vec![\\n        String::from(\\&amp;quot;A\\&amp;quot;), String::from(\\&amp;quot;B\\&amp;quot;)\\n    ];\\n    let first = get_first(&amp;amp;strs);\\n    if first.len() &amp;gt; 0 {\\n        strs.push(String::from(\\&amp;quot;C\\&amp;quot;));\\n    }\\n}&amp;quot;\&quot;  data-annotations=\&quot;{&amp;quot;hidden_lines&amp;quot;:[],&amp;quot;interp&amp;quot;:{&amp;quot;state_locations&amp;quot;:[]},&amp;quot;stepper&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[],&amp;quot;focused_paths&amp;quot;:{}},&amp;quot;boundaries&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[]}}\&quot;  data-operations=\&quot;[&amp;quot;permissions&amp;quot;]\&quot;  data-responses=\&quot;{&amp;quot;permissions&amp;quot;:[{&amp;quot;Ok&amp;quot;:{&amp;quot;boundaries&amp;quot;:[{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:false,&amp;quot;type_writeable&amp;quot;:false},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;location&amp;quot;:45}],&amp;quot;loan_points&amp;quot;:{},&amp;quot;loan_regions&amp;quot;:{},&amp;quot;move_points&amp;quot;:{},&amp;quot;move_regions&amp;quot;:{},&amp;quot;steps&amp;quot;:[{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:39,&amp;quot;char_start&amp;quot;:39,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:49,&amp;quot;char_start&amp;quot;:44,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*v&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:49,&amp;quot;char_start&amp;quot;:44,&amp;quot;filename&amp;quot;:0}}]},{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:49,&amp;quot;char_start&amp;quot;:49,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:49,&amp;quot;char_start&amp;quot;:44,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;v&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*v&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:51,&amp;quot;char_start&amp;quot;:50,&amp;quot;filename&amp;quot;:0}}]}]}},{&amp;quot;Ok&amp;quot;:{&amp;quot;boundaries&amp;quot;:[{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:true,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:true,&amp;quot;type_writeable&amp;quot;:true},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;location&amp;quot;:169},{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:false,&amp;quot;type_writeable&amp;quot;:false},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;location&amp;quot;:188},{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:true,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:true,&amp;quot;type_writeable&amp;quot;:true},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:true},&amp;quot;location&amp;quot;:213}],&amp;quot;loan_points&amp;quot;:{&amp;quot;0&amp;quot;:{&amp;quot;char_end&amp;quot;:173,&amp;quot;char_start&amp;quot;:168,&amp;quot;filename&amp;quot;:0},&amp;quot;1&amp;quot;:{&amp;quot;char_end&amp;quot;:237,&amp;quot;char_start&amp;quot;:209,&amp;quot;filename&amp;quot;:0}},&amp;quot;loan_regions&amp;quot;:{&amp;quot;0&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;char_end&amp;quot;:173,&amp;quot;char_start&amp;quot;:168,&amp;quot;filename&amp;quot;:0},{&amp;quot;char_end&amp;quot;:198,&amp;quot;char_start&amp;quot;:183,&amp;quot;filename&amp;quot;:0}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:0}},&amp;quot;1&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;char_end&amp;quot;:237,&amp;quot;char_start&amp;quot;:209,&amp;quot;filename&amp;quot;:0}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:1}}},&amp;quot;move_points&amp;quot;:{},&amp;quot;move_regions&amp;quot;:{},&amp;quot;steps&amp;quot;:[{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:238,&amp;quot;char_start&amp;quot;:238,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:237,&amp;quot;char_start&amp;quot;:209,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;strs&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:238,&amp;quot;char_start&amp;quot;:237,&amp;quot;filename&amp;quot;:0}}]},{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:141,&amp;quot;char_start&amp;quot;:141,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:81,&amp;quot;char_start&amp;quot;:73,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;strs&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:155,&amp;quot;char_start&amp;quot;:150,&amp;quot;filename&amp;quot;:0}}]},{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:175,&amp;quot;char_start&amp;quot;:175,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:155,&amp;quot;char_start&amp;quot;:150,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;strs&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:0},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:0},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}],[&amp;quot;first&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*first&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:198,&amp;quot;char_start&amp;quot;:183,&amp;quot;filename&amp;quot;:0}}]},{&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:200,&amp;quot;char_start&amp;quot;:200,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;char_end&amp;quot;:198,&amp;quot;char_start&amp;quot;:183,&amp;quot;filename&amp;quot;:0},&amp;quot;state&amp;quot;:[[&amp;quot;strs&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true}}],[&amp;quot;first&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*first&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}]],&amp;quot;to&amp;quot;:{&amp;quot;char_end&amp;quot;:237,&amp;quot;char_start&amp;quot;:209,&amp;quot;filename&amp;quot;:0}}]}]}}]}\&quot;  data-config=\&quot;{&amp;quot;boundaries&amp;quot;:&amp;quot;true&amp;quot;,&amp;quot;stepper&amp;quot;:&amp;quot;true&amp;quot;}\&quot;  data-no-interact=\&quot;true\&quot; &gt;&lt;/div&gt;\n\nWhich of the following best explains why `strs` loses and regains write permissions?\n&quot;}},{&quot;context&quot;:&quot;The undefined behavior arises because `v1` is read after being freed. Note that the other three options are correct statements\nabout the program, but they do not explain why the undefined behavior actually occurs. For example, if the `println` were deleted,\nthen the other three options are still true, but the program no longer has undefined behavior.\n&quot;,&quot;id&quot;:&quot;652e596c-7cc9-42e6-a7f8-701879cd9a2b&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;`v1[0]` reads `v1`, which points to deallocated memory&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;`v2` owns the vector data on the heap, while `v1` does not&quot;,&quot;`v1` has been moved into `v2` on line 2&quot;,&quot;`v1` has its pointer invalidated by the `push` on line 3&quot;],&quot;prompt&quot;:&quot;Consider this unsafe program:\n&lt;div class=\&quot;aquascope-embed\&quot; data-code=\&quot;&amp;quot;fn main() {\\nlet v1 = vec![1, 2, 3];\\nlet mut v2 = v1;\\nv2.push(4);\\nprintln!(\\&amp;quot;{}\\&amp;quot;, v1[0]);    \\n}&amp;quot;\&quot;  data-annotations=\&quot;{&amp;quot;hidden_lines&amp;quot;:[1,6],&amp;quot;interp&amp;quot;:{&amp;quot;state_locations&amp;quot;:[87]},&amp;quot;stepper&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[],&amp;quot;focused_paths&amp;quot;:{}},&amp;quot;boundaries&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[]}}\&quot;  data-operations=\&quot;[&amp;quot;interpreter&amp;quot;]\&quot;  data-responses=\&quot;{&amp;quot;interpreter&amp;quot;:{&amp;quot;Ok&amp;quot;:{&amp;quot;result&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Error&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;PointerUseAfterFree&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_id&amp;quot;:0}}},&amp;quot;steps&amp;quot;:[{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:3}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:93,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v1&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:35,&amp;quot;char_start&amp;quot;:12,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:3}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:93,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v1&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;v2&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:52,&amp;quot;char_start&amp;quot;:36,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:3},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:4}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:93,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v1&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Unallocated&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_id&amp;quot;:0}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;v2&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:4}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:6}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:4}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:64,&amp;quot;char_start&amp;quot;:53,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}},{&amp;quot;heap&amp;quot;:{&amp;quot;locations&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Array&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;All&amp;quot;,&amp;quot;value&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:1},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:2},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:3},{&amp;quot;type&amp;quot;:&amp;quot;Int&amp;quot;,&amp;quot;value&amp;quot;:4}]}}]},&amp;quot;stack&amp;quot;:{&amp;quot;frames&amp;quot;:[{&amp;quot;body_span&amp;quot;:{&amp;quot;char_end&amp;quot;:93,&amp;quot;char_start&amp;quot;:0,&amp;quot;filename&amp;quot;:0},&amp;quot;locals&amp;quot;:[[&amp;quot;v1&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:3}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Unallocated&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_id&amp;quot;:0}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:3}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;v2&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;len&amp;quot;:4}},&amp;quot;fields&amp;quot;:[[&amp;quot;buf&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;ptr&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Adt&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;alloc_kind&amp;quot;:null,&amp;quot;fields&amp;quot;:[[&amp;quot;pointer&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Pointer&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;path&amp;quot;:{&amp;quot;parts&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Index&amp;quot;,&amp;quot;value&amp;quot;:0}],&amp;quot;segment&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Heap&amp;quot;,&amp;quot;value&amp;quot;:{&amp;quot;index&amp;quot;:0}}},&amp;quot;range&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;NonNull&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;name&amp;quot;:&amp;quot;Unique&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;cap&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:6}]],&amp;quot;name&amp;quot;:&amp;quot;RawVec&amp;quot;,&amp;quot;variant&amp;quot;:null}}],[&amp;quot;len&amp;quot;,{&amp;quot;type&amp;quot;:&amp;quot;Uint&amp;quot;,&amp;quot;value&amp;quot;:4}]],&amp;quot;name&amp;quot;:&amp;quot;Vec&amp;quot;,&amp;quot;variant&amp;quot;:null}}]],&amp;quot;location&amp;quot;:{&amp;quot;char_end&amp;quot;:86,&amp;quot;char_start&amp;quot;:65,&amp;quot;filename&amp;quot;:0},&amp;quot;name&amp;quot;:&amp;quot;main&amp;quot;}]}}]}}}\&quot;  data-config=\&quot;{&amp;quot;shouldFail&amp;quot;:&amp;quot;true&amp;quot;}\&quot;  data-no-interact=\&quot;true\&quot; &gt;&lt;/div&gt;\n\nWhich of the following best describes how undefined behavior occurs in this program?\n&quot;}}]}"  data-quiz-fullscreen=""  data-quiz-cache-answers="" ></div>
<h3 id="data-must-outlive-all-of-its-references"><a class="header" href="#data-must-outlive-all-of-its-references">Data Must Outlive All Of Its References</a></h3>
<p>The last safety property is that <strong>data must outlive any references to it.</strong> For example, let's say we tried to return a reference to data inside a function:</p>
<pre><code class="language-rust ignore does_not_compile">fn return_a_string() -&gt; &amp;String {
    let s = String::from(&quot;Hello world&quot;);
    let s_ref = &amp;s;
    s_ref
}</code></pre>
<p>Rust will refuse to compile this program. It will give you a somewhat mysterious error message:</p>
<pre><code class="language-text">error[E0106]: missing lifetime specifier
 --&gt; test.rs:1:25
  |
1 | fn return_a_string() -&gt; &amp;String {
  |                         ^ expected named lifetime parameter
  |
  = help: this function's return type contains a borrowed value, but there is no value for it to be borrowed from
</code></pre>
<p>We will explain more about named lifetime parameters in Chapter 10.3, <a href="ch10-03-lifetime-syntax.html">&quot;Validating References with Lifetimes&quot;</a>. For now, you can see the underlying safety issue from this simulation:</p>
<div class="aquascope-embed" data-code="&quot;fn return_a_string() -&gt; &amp;String {\n    let s = String::from(\&quot;Hello world\&quot;);\n    let s_ref = &amp;s;\n    s_ref\n}\n\nfn main() {\n  let s_main = return_a_string();\n  println!(\&quot;{}\&quot;, s_main);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[94,153,179]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Error&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;PointerUseAfterFree&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:153,&quot;char_start&quot;:122,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:153,&quot;char_start&quot;:122,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:31,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;name&quot;:&quot;return_a_string&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:32},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:153,&quot;char_start&quot;:122,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;s&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:11}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:74,&quot;char_start&quot;:38,&quot;filename&quot;:0},&quot;name&quot;:&quot;return_a_string&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:32},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:153,&quot;char_start&quot;:122,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;s&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:11}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;s_ref&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;s&quot;}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:94,&quot;char_start&quot;:79,&quot;filename&quot;:0},&quot;name&quot;:&quot;return_a_string&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:72},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:32},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:119},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:111},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:114},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:108},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:153,&quot;char_start&quot;:122,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;(return)&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;s&quot;}}},&quot;range&quot;:null}}],[&quot;s&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:11}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:11}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}],[&quot;s_ref&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;s&quot;}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:104,&quot;char_start&quot;:99,&quot;filename&quot;:0},&quot;name&quot;:&quot;return_a_string&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;char_end&quot;:153,&quot;char_start&quot;:122,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;(return)&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;location&quot;:{&quot;char_end&quot;:106,&quot;char_start&quot;:105,&quot;filename&quot;:0},&quot;name&quot;:&quot;return_a_string&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;s_main&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;location&quot;:{&quot;char_end&quot;:153,&quot;char_start&quot;:122,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:181,&quot;char_start&quot;:108,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;s_main&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;location&quot;:{&quot;char_end&quot;:178,&quot;char_start&quot;:156,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;shouldFail&quot;:&quot;true&quot;,&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>At L1, <code>s_ref</code> points to a variable <code>s</code> within the stack frame of <code>return_a_string</code>. When <code>return_a_string</code> ends, <code>s</code> and its heap data are deallocated. At L2, <code>s_ref</code> has been returned and is now <code>s_main</code>, which points to freed memory. So far, the program is actually safe --- no undefined behavior has happened.</p>
<p>However, at L3 we try to actually <em>use</em> the deallocated pointer <code>s_main</code> by reading it in the <code>println</code>. That read of freed memory is undefined behavior. In sum, it's unsafe to return a reference to data on a function's stack frame, and to then use that reference. The reference cannot outlive the data.</p>
<p>As a more interesting example, let's say we tried to add a reference to a vector of references:</p>
<pre><code class="language-rust ignore does_not_compile">fn add_ref(v: &amp;mut Vec&lt;&amp;i32&gt;, n: i32) {
    let r = &amp;n;
    v.push(r);
}</code></pre>
<p>Rust will also reject this function, but with a different error:</p>
<pre><code class="language-text">error[E0597]: `n` does not live long enough
 --&gt; src/lib.rs:2:13
  |
1 | fn add_ref(v: &amp;mut Vec&lt;&amp;i32&gt;, n: i32) {
  |                        - let's call the lifetime of this reference `'1`
2 |     let r = &amp;n;
  |             ^^ borrowed value does not live long enough
3 |     v.push(r);
  |     --------- argument requires that `n` is borrowed for `'1`
4 | }
  |  - `n` dropped here while still borrowed
</code></pre>
<p>The argument <code>n</code> only lives for the duration of <code>add_ref</code>. However, the reference <code>r</code> is being pushed into <code>v</code>, and <code>v</code> lives longer than <code>add_ref</code>. Therefore Rust complains that the data (<code>n</code>) does not outlive all of its references (<code>r</code>).</p>
<p>If this function were allowed, we could call <code>add_ref</code> like this:</p>
<div class="aquascope-embed" data-code="&quot;fn add_ref(v: &amp;mut Vec&lt;&amp;i32&gt;, n: i32) {\n    let r = &amp;n;\n    v.push(r);    \n}\nfn main() {\n    let mut nums = Vec::new();\n    add_ref(&amp;mut nums, 0);\n    println!(\&quot;{}\&quot;, nums[0]);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[70,175]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Error&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;PointerUseAfterFree&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:0}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:119,&quot;char_start&quot;:93,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:0}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:146,&quot;char_start&quot;:124,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:0}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:146,&quot;char_start&quot;:124,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:76,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;v&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;nums&quot;}}},&quot;range&quot;:null}}],[&quot;n&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}]],&quot;location&quot;:{&quot;char_end&quot;:37,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;name&quot;:&quot;add_ref&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:0}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:0}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:146,&quot;char_start&quot;:124,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:76,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;v&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;nums&quot;}}},&quot;range&quot;:null}}],[&quot;n&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}],[&quot;r&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;n&quot;}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:55,&quot;char_start&quot;:44,&quot;filename&quot;:0},&quot;name&quot;:&quot;add_ref&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;n&quot;}}},&quot;range&quot;:null}}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:1}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:1}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:146,&quot;char_start&quot;:124,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:76,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;v&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;nums&quot;}}},&quot;range&quot;:null}}],[&quot;n&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}],[&quot;r&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;n&quot;}}},&quot;range&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:70,&quot;char_start&quot;:60,&quot;filename&quot;:0},&quot;name&quot;:&quot;add_ref&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;n&quot;}}},&quot;range&quot;:null}}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:1}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:1}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:146,&quot;char_start&quot;:124,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;char_end&quot;:76,&quot;char_start&quot;:0,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;v&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;nums&quot;}}},&quot;range&quot;:null}}],[&quot;n&quot;,{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}]],&quot;location&quot;:{&quot;char_end&quot;:76,&quot;char_start&quot;:75,&quot;filename&quot;:0},&quot;name&quot;:&quot;add_ref&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:1}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:1}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:146,&quot;char_start&quot;:124,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;char_end&quot;:177,&quot;char_start&quot;:77,&quot;filename&quot;:0},&quot;locals&quot;:[[&quot;nums&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:1}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:1}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;location&quot;:{&quot;char_end&quot;:174,&quot;char_start&quot;:151,&quot;filename&quot;:0},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;shouldFail&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>At L1, by pushing <code>&amp;n</code> into <code>v</code>, the vector now contains a reference to data within the frame for <code>add_ref</code>. However, when <code>add_ref</code> returns, its frame is deallocated. Therefore the reference in the vector points to deallocated memory. Using the reference by printing <code>v[0]</code> violates memory safety.</p>
<div class="quiz-placeholder" data-quiz-name="ch04-02-references-sec3-safety"  data-quiz-questions="{&quot;questions&quot;:[{&quot;context&quot;:&quot;Although `n` is marked as `mut`, the reference to `n` must also be marked as `mut`. \nSo a valid version of this program would say `incr(&amp;mut n)`.\n&quot;,&quot;id&quot;:&quot;5080616f-6f4c-43f7-aa3a-8b23f2798937&quot;,&quot;type&quot;:&quot;Tracing&quot;,&quot;answer&quot;:{&quot;doesCompile&quot;:false,&quot;lineNumber&quot;:7},&quot;prompt&quot;:{&quot;program&quot;:&quot;fn incr(n: &amp;mut i32) {\n  *n += 1;\n}\n\nfn main() {\n  let mut n = 1;\n  incr(&amp;n);\n  println!(\&quot;{n}\&quot;);\n}\n&quot;}},{&quot;context&quot;:&quot;It is illegal to use a mutable reference to a value (`s3`) while an immutable reference \nis live (`s2`). The last line of the error is the `println` on line 6, because if you \ndeleted that line, then this program would compile.\n&quot;,&quot;id&quot;:&quot;e9846c5d-1254-4420-9986-dae4af86b9af&quot;,&quot;type&quot;:&quot;Tracing&quot;,&quot;answer&quot;:{&quot;doesCompile&quot;:false,&quot;lineNumber&quot;:6},&quot;prompt&quot;:{&quot;program&quot;:&quot;fn main() {\n  let mut s = String::from(\&quot;hello\&quot;);\n  let s2 = &amp;s;\n  let s3 = &amp;mut s;\n  s3.push_str(\&quot; world\&quot;);\n  println!(\&quot;{s2}\&quot;);\n}\n&quot;}},{&quot;context&quot;:&quot;As we saw earlier in the section, `v.push(n)` can cause `v` to reallocate its internal contents, invalidating any references to the elements of `v` on the heap.\nTherefore calling `give_and_take(&amp;v, 4)` will cause previously-created element references to point to invalid memory. The two programs that bind `let n = &amp;v[0]`\nbefore `give_and_take` are candidates for undefined behavior.\n\nThe program that does `println!(\&quot;{}\&quot;, n)` will cause undefined behavior by reading the invalid memory. The program that does `println!(\&quot;{}\&quot;, k)` will not cause undefined\nbehavior, because it does not use the invalidated reference.\n&quot;,&quot;id&quot;:&quot;80f6bcd6-b74a-4da3-a014-d423c82ce405&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:[&quot;```\nlet v = vec![1, 2, 3];\nlet n = &amp;v[0];\ngive_and_take(&amp;v, 4);\nprintln!(\&quot;{}\&quot;, n);\n```\n&quot;]},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;```\nlet v = vec![1, 2, 3];\nlet v2 = &amp;v;\ngive_and_take(&amp;v, 4);\nprintln!(\&quot;{}\&quot;, v2[0]);\n```\n&quot;,&quot;```\nlet v = vec![1, 2, 3];\nlet n = &amp;v[0];\nlet k = give_and_take(&amp;v, 4);\nprintln!(\&quot;{}\&quot;, k);\n```\n&quot;,&quot;```\nlet v = vec![1, 2, 3];\ngive_and_take(&amp;v, 4);\nlet n = &amp;v[0];\nprintln!(\&quot;{}\&quot;, n);\n```\n&quot;],&quot;prompt&quot;:&quot;Consider this Rust function that pushes a number onto the end of a vector, and then removes and returns the number from the front of the vector:\n\n```\nfn give_and_take(v: &amp;Vec&lt;i32&gt;, n: i32) -&gt; i32 {\n    v.push(n);\n    v.remove(0)\n}\n```\n\nNormally, if you try to compile this function, the compiler returns the following error:\n\n```text\nerror[E0596]: cannot borrow `*v` as mutable, as it is behind a `&amp;` reference\n --&gt; test.rs:2:5\n  |\n1 | fn give_and_take(v: &amp;Vec&lt;i32&gt;, n: i32) -&gt; i32 {\n  |                     --------- help: consider changing this to be a mutable reference: `&amp;mut Vec&lt;i32&gt;`\n2 |     v.push(n);\n  |     ^^^^^^^^^ `v` is a `&amp;` reference, so the data it refers to cannot be borrowed as mutable\n```\n\nAssume that the compiler did NOT reject this function. Of the following programs, select each\nthat could possibly cause undefined behavior if executed.\n&quot;}}]}"  data-quiz-fullscreen=""  data-quiz-cache-answers="" ></div>
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<p>References provide the ability to read and write data without consuming ownership of it. References are created with borrows (<code>&amp;</code> and <code>&amp;mut</code>) and used with dereferences (<code>*</code>), often implicitly.</p>
<p>However, references can be easily misused. Rust's borrow checker enforces a system of permissions that ensures references are used safely:</p>
<ul>
<li>All variables can read, own, and (optionally) write their data.</li>
<li>Creating a reference will transfer permissions from the borrowed path to the reference.</li>
<li>Permissions are returned once the reference's lifetime has ended.</li>
<li>Data must outlive all references that point to it.</li>
</ul>
<p>In this section, it probably feels like we've described more of what Rust <em>cannot</em> do than what Rust <em>can</em> do. That is intentional! One of Rust's core features is allowing you to use pointers without garbage collection, while also avoiding undefined behavior. Understanding these safety rules now will help you avoid frustration with the compiler later.</p>
<script type="text/javascript" src="aquascope/lib.js"></script><link rel="stylesheet" type="text/css" href="aquascope/lib.css">
<script type="text/javascript" src="quiz/lib.js"></script><link rel="stylesheet" type="text/css" href="quiz/lib.css">
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch04-01-what-is-ownership.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="ch04-03-fixing-ownership-errors.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch04-01-what-is-ownership.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="ch04-03-fixing-ownership-errors.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="ferris.js"></script>
        <script src="js-extensions/packages/telemetry/dist/index.js"></script>
        <script src="js-extensions/packages/consent-form/dist/index.js"></script>
        <script src="js-extensions/packages/feedback/dist/index.js"></script>


    </body>
</html>
